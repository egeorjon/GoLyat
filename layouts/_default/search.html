{{- define "main" -}}
    {{- $current_page := . -}}
    {{- $display_image  := and (isset .Params "images") (.Site.Params.Single.displayimage | default false) -}}
    {{- if $display_image -}}
        <div class="container">
            <div class="row">
                <div class="col mb-5 text-center">
                    {{- partial "partials/image.html" (dict "context" . "Destination" .Params.images "Title" .Title "Text" .Title) -}}
                </div><!-- col -->
            </div><!-- row -->
        </div><!-- container -->
    {{- end -}}
    <div id="search-form" class="mb-5">
        <div class="container limit-width">
            <div class="row">
                <h2 class="col mb-5">{{- "search-form" -}}</h2>
            </div>
            <form action="{{ .Permalink }}" method="GET" class="row justify-content-center">
                <label for="search-query" class="col-form-label col-auto"><span class="visually-hidden">{{- "search-please-enter" -}}</span></label>
                <div class="col-auto">
                    <input type="text" class="form-control" id="search-query" aria-describedby="searchHelp" name="s" placeholder="{{- "what-you-looking-for" -}}" />
                    <div id="searchHelp" class="form-text visually-hidden">{{- "search-help" -}}</div>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-dark">
                        <i class="bi-search" aria-hidden="true"></i>
                        <span class="visually-hidden">{{- "search" -}}</span>
                    </button>
                </div><!-- col -->
            </form>
        </div><!-- container -->
    </div><!-- search-form -->
    <div id="search-results" class="d-none">
        <div class="container limit-width">
            <div class="row">
                <h2 class="col" id="search-results-title">{{- "search-results" -}}</h2>
            </div>
            {{- $class := partialCached "partials/class-columns.html" (.Site.Params.PostList.ListColumns | default (dict "xs" 1 "sm" 1 "md" 1 "lg" 1 "xl" 1)) "search" -}}
            <div id="search-results-items" class="post-list {{ $class -}}">

            </div><!-- search-results-items -->
        </div><!-- container -->
    </div><!-- Search-results -->
    <script id="search-result-template" type="text/x-js-template">
    <div class="col mb-6">
        <article class="card">
            <div class="card-body">
                <h3 class="card-title post-title"><a href="${link}">${title}</a></h3>
                <ul class="post-meta inline-list">
                    ${ isset section }<li class="post-section"><i class="bi-folder2-open"></i> <span class="visually-hidden">{{- "In" -}}</span><span class="in-category">${section}</span></li>${end}
                    ${ isset publish }<li class="post-date"><i class="bi-calendar3"></i> <span class="visually-hidden">{{- "posted-on" -}}</span><time class="entry-date published" datetime="${publish}">${publish}</time></li>${end}
                    ${ isset tags }<li class="post-tags"><i class="bi-tags"></i> <span class="visually-hidden" aria-label="hidden">{{- "tags" -}}:</span>${tags}</li>${end}
                </ul>                
                <p class="post-summary card-text">${summary}</p>
                <p><i class="bi-reception-4"></i> ${score}</p>
            </div><!-- card-body -->
        </article>
    </div><!-- col -->
    </script>
{{- end -}}