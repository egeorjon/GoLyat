{{- define "main" -}}
    {{- $columns     := site.Params.PostList.Columns | default site.Data.default_params.list_columns -}}
    {{- $post_format := site.Params.PostList.PostFormat | default site.Data.default_params.list_format -}}
    {{- $meta        := site.Params.PostList.meta -}}
    {{- if and (eq .Kind "taxonomy") (eq .Type "series") -}}
        {{- $columns = site.Params.SeriesList.Columns | default site.Data.default_params.list_series_columns -}}
        {{- $post_format = site.Params.SeriesList.PostFormat | default site.Data.default_params.list_series_format -}}
        {{- $meta        = dict "middle" (dict "1" "linkedsection") -}}
    {{- end -}}
    {{- $partial_path := path.Join "partials/posts-format" (printf "%s%s%s" "posts-list-" $post_format ".html") -}}
    <section class="page-list">
        <div class="container limit-width">
            <div class="row list-summary">
                {{- $string := .Summary -}}
                {{- with .Description -}}{{- $string = . -}}{{- end -}}
                {{- with $string -}}
                    <div class="col page-summary">
                        <p>{{- . | markdownify -}}</p>
                    </div><!-- col -->
                {{- end -}}
            </div>
            {{- $class := partialCached "partials/class-columns.html" $columns (delimit $columns "-") -}}
            <div class="post-list {{ $class -}}">
                {{- range .Paginator.Pages -}}
                <div class="col">
                    {{- partial $partial_path (dict "context" . "params" (dict "kindctx" $.Kind "typectx" $.Type "meta" $meta)) -}}
                </div><!-- col -->
                {{- end -}}
            </div><!-- row -->
        </div><!-- container -->
    </section>
{{- end -}}
{{- define "bottomline" -}}
    <section id="page-bottomline" class="page-bottomline-pagination">
        <div class="container">
            {{- if gt .Paginator.TotalPages 1 -}}
            <nav class="d-flex justify-content-between" aria-label="Page navigation">
                <ul class="pagination mb-0">
                    {{- $disabled := "" -}}
                    {{- $aria     := false -}}
                    {{- if eq .Paginator.PageNumber 1 -}}
                        {{- $disabled = "disabled" -}}
                        {{- $aria     = true -}}
                    {{- end -}}
                    <li class="page-item {{ $disabled -}}">
                        <a class="page-link" href="{{- .Paginator.First.URL -}}" {{ if $aria -}}aria-disabled="true"{{- end -}}>
                            <i class="bi-chevron-double-left"> </i><span class="d-none d-lg-inline">{{- i18n "first-post" -}}</span>
                        </a>
                    </li>
                    <li class="page-item {{ $disabled -}}">
                        <a class="page-link" href="{{- with .Paginator.Prev -}}{{- .URL -}}{{- else -}}#{{- end -}}" aria-label="Previous" {{ if $aria -}}aria-disabled="true"{{- end -}}>
                            <i class="bi-chevron-left"> </i><span class="d-none d-lg-inline">{{- i18n "previous-post" -}}</span>
                        </a>
                    </li>
                </ul>
                {{- $start := math.Min (math.Sub .Paginator.TotalPages 4) (math.Max 1 (math.Sub .Paginator.PageNumber 2)) -}}
                {{- $end   := math.Min (math.Add $start 4) .Paginator.TotalPages -}}
                <ul class="pagination mb-0">
                {{- range .Paginator.Pagers -}}
                    {{- if and (ge .PageNumber $start) (le .PageNumber $end) -}}
                    <li class="page-item {{ if eq . $.Paginator -}}active{{- end -}}" {{ if eq . $.Paginator -}}aria-current="page"{{- end -}}>
                        <a class="page-link" href="{{- .URL -}}">{{- .PageNumber -}}</a>
                    </li>
                    {{- end -}}
                {{- end -}}
                </ul>
                <ul class="pagination mb-0">
                    {{- $disabled := "" -}}
                    {{- $aria     := false -}}
                    {{- if eq .Paginator.PageNumber .Paginator.TotalPages -}}
                        {{- $disabled = "disabled" -}}
                        {{- $aria     = true -}}
                    {{- end -}}
                    <li class="page-item {{ $disabled -}}">
                        <a class="page-link" href="{{- with .Paginator.Next -}}{{- .URL -}}{{- else -}}#{{- end -}}" aria-label="Next" {{ if $aria -}}aria-disabled="true"{{- end -}}>
                            <span class="d-none d-lg-inline">{{- i18n "next-post" -}}</span><i class="bi-chevron-right"> </i>
                        </a>
                    </li>
                    <li class="page-item {{ $disabled -}}">
                        <a class="page-link" href="{{- .Paginator.Last.URL -}}" {{ if $aria -}}aria-disabled="true"{{- end -}}>
                            <span class="d-none d-lg-inline">{{- i18n "last-post" -}}</span><i class="bi-chevron-double-right"> </i>
                        </a>
                    </li>
                </ul>
            </nav>
            {{- end -}}
        </div>
    </section>
{{- end -}}