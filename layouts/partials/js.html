<script src="/assets/js/bootstrap-5.1.3/bootstrap.min.js"></script>
<script src="/assets/js/simple-lightbox-2.10.3/simple-lightbox.min.js"></script>
{{- if eq .Layout "search" -}}
<script src="/assets/js/fuse-6.5.3/fuse.min.js" type="text/javascript"></script>
<script src="/assets/js/search.js" type="text/javascript"></script>
{{- end -}}
<script>
    /* --------------------------------------------
    --- Initiate the image galleries            ---
    ----------------------------------------------- */
    var matches = document.querySelectorAll(".gallery");
    matches.forEach(
        gal => {
            new SimpleLightbox("#" + gal.id + " a");
        }
    );
    new SimpleLightbox(".figure a");

    /* -----------------------------------------
    --- Update tables                        ---
    -------------------------------------------- */
    var matches = document.querySelectorAll("table");
    matches.forEach(
        tb => {
            if (!tb.classList.contains("attachments")) {
                tb.classList.add("table", "table-striped");
                tb.querySelector("thead").classList.add("table-golyat");
                var wrapper = document.createElement('div');
                wrapper.classList.add("table-responsive-md");
                tb.parentNode.insertBefore(wrapper, tb);
                wrapper.appendChild(tb);
            }
        }
    );

    /* -----------------------------------------
    --- Update footnotes                     ---
    -------------------------------------------- */

    /* --- Update the badge (to fit with bootstrap styles) --- */
    document.querySelectorAll(".footnote-ref").forEach(
        fr => {
            fr.classList.add("badge","bg-primary");
            fr.classList.remove("footnote-ref");
            var text = fr.textContent;
            fr.textContent = "[" + text + "]";
        }
    );

    function insertAfter(newNode, referenceNode) {
        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }

    /* --- Add the title --- */
    if (document.querySelector(".footnotes")) {
        var notes = document.createElement("span");
        notes.classList.add("footnotes-title");
        notes.textContent = "Notes";
        insertAfter(notes, document.querySelector(".footnotes > hr"));
    }
</script>